<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Graph: Compare climate policy effectiveness across major economies. Show NDC commitments, domestic policy alignment, and implementation progress for countries like Brazil, India, and South Africa. Include maps of renewable energy facilities to visualize policy implementation across these regions.</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { margin: 0; padding: 10px; font-family: Arial, sans-serif; }
        .container { width: 100%; height: 500px; border: 1px solid #ddd; position: relative; }
        .graph { width: 100%; height: 100%; }
        .tooltip { 
            position: absolute; 
            background: rgba(0,0,0,0.8); 
            color: white; 
            padding: 8px; 
            border-radius: 4px; 
            font-size: 12px; 
            pointer-events: none; 
            opacity: 0;
        }
        .query-title { 
            font-size: 14px; 
            font-weight: bold; 
            margin-bottom: 10px; 
            color: #333;
        }
        .node { cursor: pointer; }
        .link { stroke: #999; stroke-opacity: 0.6; stroke-width: 1.5px; }
        .node-label { font-size: 10px; fill: #333; text-anchor: middle; }
    </style>
</head>
<body>
    <div class="query-title">Knowledge Graph: Compare climate policy effectiveness across major economies. Show NDC commitments, domestic policy alignment, and implementation progress for countries like Brazil, India, and South Africa. Include maps of renewable energy facilities to visualize policy implementation across these regions.</div>
    <div class="container">
        <svg class="graph" id="kg-graph"></svg>
        <div class="tooltip" id="tooltip"></div>
    </div>
    
    <script>
        // Embedded KG data
        const kgData = {
  "nodes": [
    {
      "id": "Q874",
      "kind": "Concept",
      "label": "governance sector",
      "description": ""
    },
    {
      "id": "Q1551",
      "kind": "Concept",
      "label": "policy implementation",
      "description": "Process of putting into practice policies and laws through practical actions"
    },
    {
      "id": "Q1582",
      "kind": "Concept",
      "label": "sustainability governance",
      "description": "set of written and unwritten rules that link ecological citizenship with institutions and norms of governance"
    },
    {
      "id": "Q1550",
      "kind": "Concept",
      "label": "rulemaking",
      "description": "Creation and enactment of laws, mandatory regulations, and ordinances by legislative bodies."
    },
    {
      "id": "Q1549",
      "kind": "Concept",
      "label": "policy formulation",
      "description": "Processes of identifying societal problems, developing policy options under the rule of law, and selecting preferred courses of action"
    },
    {
      "id": "Q1552",
      "kind": "Concept",
      "label": "administrative enforcement",
      "description": "Process focused on ensuring adherence to established rules, laws, and policies through monitoring, inspections, and corrective actions"
    },
    {
      "id": "Q775",
      "kind": "Concept",
      "label": "public sector",
      "description": "Activities of government agencies and institutions that provide public services, enforce laws and manage public resources."
    },
    {
      "id": "Q1649",
      "kind": "Concept",
      "label": "health policy",
      "description": "development, implementation, and evaluation of policies, regulations, and frameworks to improve healthcare systems"
    }
  ],
  "edges": [
    {
      "source": "Q874",
      "target": "Q775",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q874",
      "target": "Q1549",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q874",
      "target": "Q1550",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q874",
      "target": "Q1551",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q874",
      "target": "Q1552",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q874",
      "target": "Q1582",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q874",
      "target": "Q1649",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1551",
      "target": "Q874",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1582",
      "target": "Q874",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1550",
      "target": "Q874",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1549",
      "target": "Q874",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1552",
      "target": "Q874",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q775",
      "target": "Q874",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1649",
      "target": "Q874",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    }
  ],
  "query_concepts": [
    "Q1551"
  ],
  "query_concept_labels": [
    "policy implementation"
  ],
  "total_found": 8,
  "concepts": [
    {
      "id": "Q874",
      "label": "governance sector"
    },
    {
      "id": "Q1551",
      "label": "policy implementation"
    },
    {
      "id": "Q1582",
      "label": "sustainability governance"
    },
    {
      "id": "Q1550",
      "label": "rulemaking"
    },
    {
      "id": "Q1549",
      "label": "policy formulation"
    },
    {
      "id": "Q1552",
      "label": "administrative enforcement"
    },
    {
      "id": "Q775",
      "label": "public sector"
    },
    {
      "id": "Q1649",
      "label": "health policy"
    }
  ],
  "relationships": [
    {
      "source_id": "Q874",
      "target_id": "Q775",
      "source_label": "governance sector",
      "target_label": "public sector",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "governance sector -> public sector (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q874",
      "target_id": "Q1549",
      "source_label": "governance sector",
      "target_label": "policy formulation",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "governance sector -> policy formulation (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q874",
      "target_id": "Q1550",
      "source_label": "governance sector",
      "target_label": "rulemaking",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "governance sector -> rulemaking (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q874",
      "target_id": "Q1551",
      "source_label": "governance sector",
      "target_label": "policy implementation",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "governance sector -> policy implementation (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q874",
      "target_id": "Q1552",
      "source_label": "governance sector",
      "target_label": "administrative enforcement",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "governance sector -> administrative enforcement (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q874",
      "target_id": "Q1582",
      "source_label": "governance sector",
      "target_label": "sustainability governance",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "governance sector -> sustainability governance (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q874",
      "target_id": "Q1649",
      "source_label": "governance sector",
      "target_label": "health policy",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "governance sector -> health policy (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q1551",
      "target_id": "Q874",
      "source_label": "policy implementation",
      "target_label": "governance sector",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "policy implementation -> governance sector (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q1582",
      "target_id": "Q874",
      "source_label": "sustainability governance",
      "target_label": "governance sector",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "sustainability governance -> governance sector (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q1550",
      "target_id": "Q874",
      "source_label": "rulemaking",
      "target_label": "governance sector",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "rulemaking -> governance sector (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q1549",
      "target_id": "Q874",
      "source_label": "policy formulation",
      "target_label": "governance sector",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "policy formulation -> governance sector (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q1552",
      "target_id": "Q874",
      "source_label": "administrative enforcement",
      "target_label": "governance sector",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "administrative enforcement -> governance sector (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q775",
      "target_id": "Q874",
      "source_label": "public sector",
      "target_label": "governance sector",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "public sector -> governance sector (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q1649",
      "target_id": "Q874",
      "source_label": "health policy",
      "target_label": "governance sector",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "health policy -> governance sector (SUBCONCEPT_OF)"
    }
  ],
  "query": "Compare climate policy effectiveness across major economies. Show NDC commitments, domestic policy alignment, and implementation progress for countries like Brazil, India, and South Africa. Include maps of renewable energy facilities to visualize policy implementation across these regions.",
  "extraction_method": "query_and_mcp_enhanced",
  "query_concepts_count": 1,
  "mcp_concepts_count": 0,
  "total_concepts_found": 1,
  "mcp_concepts": [],
  "links": [
    {
      "source": "Q874",
      "target": "Q775",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q874",
      "target": "Q1549",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q874",
      "target": "Q1550",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q874",
      "target": "Q1551",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q874",
      "target": "Q1552",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q874",
      "target": "Q1582",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q874",
      "target": "Q1649",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1551",
      "target": "Q874",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1582",
      "target": "Q874",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1550",
      "target": "Q874",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1549",
      "target": "Q874",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1552",
      "target": "Q874",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q775",
      "target": "Q874",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1649",
      "target": "Q874",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    }
  ]
};
        
        // Initialize visualization
        const width = 800;
        const height = 500;
        
        const svg = d3.select("#kg-graph")
            .attr("width", "100%")
            .attr("height", "100%")
            .attr("viewBox", `0 0 ${width} ${height}`);
            
        const g = svg.append("g");
        
        // Add zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.3, 3])
            .on("zoom", (event) => {
                g.attr("transform", event.transform);
            });
        svg.call(zoom);
        
        // Process data
        const nodes = kgData.nodes || [];
        const links = kgData.links || [];
        
        // Color mapping
        const nodeColors = {
            'Concept': '#1f77b4',
            'Dataset': '#ff7f0e', 
            'Passage': '#2ca02c',
            'Document': '#d62728',
            'Unknown': '#7f7f7f'
        };
        
        // Create simulation
        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id).distance(60))
            .force("charge", d3.forceManyBody().strength(-200))
            .force("center", d3.forceCenter(width / 2, height / 2));
        
        // Create links
        const link = g.append("g")
            .selectAll("line")
            .data(links)
            .enter().append("line")
            .attr("class", "link");
        
        // Create nodes
        const node = g.append("g")
            .selectAll("circle")
            .data(nodes)
            .enter().append("circle")
            .attr("class", "node")
            .attr("r", d => Math.max(5, Math.min(15, (d.importance || 1) * 8)))
            .attr("fill", d => nodeColors[d.type] || nodeColors['Unknown'])
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
        
        // Add labels
        const label = g.append("g")
            .selectAll("text")
            .data(nodes)
            .enter().append("text")
            .attr("class", "node-label")
            .attr("dy", -18)
            .text(d => d.label || d.id);
        
        // Tooltip
        const tooltip = d3.select("#tooltip");
        
        node.on("mouseover", function(event, d) {
            tooltip.transition().duration(200).style("opacity", .9);
            tooltip.html(`<strong>${d.label || d.id}</strong><br/>Type: ${d.type}<br/>Importance: ${d.importance || 'N/A'}`)
                .style("left", (event.pageX + 10) + "px")
                .style("top", (event.pageY - 28) + "px");
        })
        .on("mouseout", function(d) {
            tooltip.transition().duration(500).style("opacity", 0);
        });
        
        // Update positions on simulation tick
        simulation.on("tick", () => {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);
            
            node
                .attr("cx", d => d.x)
                .attr("cy", d => d.y);
            
            label
                .attr("x", d => d.x)
                .attr("y", d => d.y);
        });
        
        // Drag functions
        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }
        
        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }
        
        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }
    </script>
</body>
</html>