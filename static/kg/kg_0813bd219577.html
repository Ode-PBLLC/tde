<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Graph: Summarize Brazil’s NDC climate-neutrality pathway: interim targets through 2040 and the key domestic policies cited as implementation evidence.</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { margin: 0; padding: 10px; font-family: Arial, sans-serif; }
        .container { width: 100%; height: 1200px; border: 1px solid #ddd; position: relative; }
        .graph { width: 100%; height: 100%; }
        .tooltip { 
            position: absolute; 
            background: rgba(0,0,0,0.8); 
            color: white; 
            padding: 8px; 
            border-radius: 4px; 
            font-size: 12px; 
            pointer-events: none; 
            opacity: 0;
        }
        .query-title { 
            font-size: 14px; 
            font-weight: bold; 
            margin-bottom: 10px; 
            color: #333;
        }
        .node { cursor: pointer; }
        .link { stroke: #999; stroke-opacity: 0.6; stroke-width: 1.5px; }
        .node-label {
            font-size: 10px;
            fill: #333;
            text-anchor: middle;
            pointer-events: none;
            paint-order: stroke;
            stroke: white;
            stroke-width: 3px;
        }
    </style>
</head>
<body>
    <div class="query-title">Knowledge Graph: Summarize Brazil’s NDC climate-neutrality pathway: interim targets through 2040 and the key domestic policies cited as implementation evidence.</div>
    <div class="container">
        <svg class="graph" id="kg-graph"></svg>
        <div class="tooltip" id="tooltip"></div>
    </div>
    
    <script>
        // Embedded KG data
        const kgData = {
  "nodes": [
    {
      "id": "Q1652",
      "kind": "Concept",
      "label": "emissions reduction target",
      "description": "A target to reduce the prevalence of a greenhouse gas over a specific time frame"
    },
    {
      "id": "Q1208",
      "kind": "Concept",
      "label": "information instrument",
      "description": "Information instruments, or \"nodality\" in Hood and Margetts' NATO schema, are tools that give power of governments over information. In climate policy these tools raise awareness of climate change issues, enhance research and development efforts, and increase transparency through things like ecolabeling or energy efficiency labels."
    },
    {
      "id": "Q221",
      "kind": "Concept",
      "label": "greenhouse gas emissions",
      "description": "Releases of gases to the atmosphere, such as the release of carbon dioxide during fuel combustion."
    },
    {
      "id": "Q1651",
      "kind": "Concept",
      "label": "target",
      "description": "An aim to achieve a quantifiable outcome within a given time-frame, set by an institution such as a national government."
    },
    {
      "id": "Q1171",
      "kind": "Concept",
      "label": "policy instruments",
      "description": "Policy instruments are techniques or tools used by governing authorities to promote certain policies in order to achieve predetermined goals. Put simply, instruments are how a government tries to achieve its goals."
    },
    {
      "id": "Q722",
      "kind": "Concept",
      "label": "economic instrument",
      "description": "Economic instruments, or \"treasury\" in Hood and Margetts' NATO scheme, are instruments that have the power over money, taxation, and spending or influencing markets. Examples are Carbon taxes or cap-and-trade schemes."
    },
    {
      "id": "Q1207",
      "kind": "Concept",
      "label": "regulatory instrument",
      "description": "Regulatory instruments, or \"authority\" in Hood and Margetts' NATO scheme, set boundaries on behaviour through rules, like emissions disclosure, fossil fuel bans, and spatial planning laws."
    },
    {
      "id": "Q218",
      "kind": "Concept",
      "label": "greenhouse gas",
      "description": "Greenhouse gases are molecules in our atmosphere that absorb heat radiating from Earth\u2019s surface, preventing it from being emitted into space."
    },
    {
      "id": "Q1209",
      "kind": "Concept",
      "label": "organisation and governance instrument",
      "description": "Organisation and governance instruments let governments act directly on individuals, property, or the environment, enhancing institutions\u2019 capacity for climate action through new roles, bodies, and strategies."
    },
    {
      "id": "Q1653",
      "kind": "Concept",
      "label": "net-zero target",
      "description": "A commitment to balance GHG emissions with removal by a certain point in time, effectively reducing the net emissions to zero"
    }
  ],
  "edges": [
    {
      "source": "Q1652",
      "target": "Q1651",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1652",
      "target": "Q1653",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1652",
      "target": "Q218",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1652",
      "target": "Q221",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1208",
      "target": "Q1171",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q221",
      "target": "Q218",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q221",
      "target": "Q1652",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1651",
      "target": "Q1171",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1651",
      "target": "Q1652",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1171",
      "target": "Q722",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1171",
      "target": "Q1207",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1171",
      "target": "Q1208",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1171",
      "target": "Q1209",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1171",
      "target": "Q1651",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q722",
      "target": "Q1171",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1207",
      "target": "Q1171",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q218",
      "target": "Q221",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q218",
      "target": "Q1652",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1209",
      "target": "Q1171",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1653",
      "target": "Q1652",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    }
  ],
  "query_concepts": [
    "Q1651"
  ],
  "query_concept_labels": [
    "target"
  ],
  "total_found": 10,
  "concepts": [
    {
      "id": "Q1652",
      "label": "emissions reduction target"
    },
    {
      "id": "Q1208",
      "label": "information instrument"
    },
    {
      "id": "Q221",
      "label": "greenhouse gas emissions"
    },
    {
      "id": "Q1651",
      "label": "target"
    },
    {
      "id": "Q1171",
      "label": "policy instruments"
    },
    {
      "id": "Q722",
      "label": "economic instrument"
    },
    {
      "id": "Q1207",
      "label": "regulatory instrument"
    },
    {
      "id": "Q218",
      "label": "greenhouse gas"
    },
    {
      "id": "Q1209",
      "label": "organisation and governance instrument"
    },
    {
      "id": "Q1653",
      "label": "net-zero target"
    }
  ],
  "relationships": [
    {
      "source_id": "Q1652",
      "target_id": "Q1651",
      "source_label": "emissions reduction target",
      "target_label": "target",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "emissions reduction target -> target (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q1652",
      "target_id": "Q1653",
      "source_label": "emissions reduction target",
      "target_label": "net-zero target",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "emissions reduction target -> net-zero target (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q1652",
      "target_id": "Q218",
      "source_label": "emissions reduction target",
      "target_label": "greenhouse gas",
      "relationship_type": "RELATED_TO",
      "formatted": "emissions reduction target -> greenhouse gas (RELATED_TO)"
    },
    {
      "source_id": "Q1652",
      "target_id": "Q221",
      "source_label": "emissions reduction target",
      "target_label": "greenhouse gas emissions",
      "relationship_type": "RELATED_TO",
      "formatted": "emissions reduction target -> greenhouse gas emissions (RELATED_TO)"
    },
    {
      "source_id": "Q1208",
      "target_id": "Q1171",
      "source_label": "information instrument",
      "target_label": "policy instruments",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "information instrument -> policy instruments (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q221",
      "target_id": "Q218",
      "source_label": "greenhouse gas emissions",
      "target_label": "greenhouse gas",
      "relationship_type": "RELATED_TO",
      "formatted": "greenhouse gas emissions -> greenhouse gas (RELATED_TO)"
    },
    {
      "source_id": "Q221",
      "target_id": "Q1652",
      "source_label": "greenhouse gas emissions",
      "target_label": "emissions reduction target",
      "relationship_type": "RELATED_TO",
      "formatted": "greenhouse gas emissions -> emissions reduction target (RELATED_TO)"
    },
    {
      "source_id": "Q1651",
      "target_id": "Q1171",
      "source_label": "target",
      "target_label": "policy instruments",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "target -> policy instruments (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q1651",
      "target_id": "Q1652",
      "source_label": "target",
      "target_label": "emissions reduction target",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "target -> emissions reduction target (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q1171",
      "target_id": "Q722",
      "source_label": "policy instruments",
      "target_label": "economic instrument",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "policy instruments -> economic instrument (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q1171",
      "target_id": "Q1207",
      "source_label": "policy instruments",
      "target_label": "regulatory instrument",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "policy instruments -> regulatory instrument (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q1171",
      "target_id": "Q1208",
      "source_label": "policy instruments",
      "target_label": "information instrument",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "policy instruments -> information instrument (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q1171",
      "target_id": "Q1209",
      "source_label": "policy instruments",
      "target_label": "organisation and governance instrument",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "policy instruments -> organisation and governance instrument (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q1171",
      "target_id": "Q1651",
      "source_label": "policy instruments",
      "target_label": "target",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "policy instruments -> target (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q722",
      "target_id": "Q1171",
      "source_label": "economic instrument",
      "target_label": "policy instruments",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "economic instrument -> policy instruments (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q1207",
      "target_id": "Q1171",
      "source_label": "regulatory instrument",
      "target_label": "policy instruments",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "regulatory instrument -> policy instruments (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q218",
      "target_id": "Q221",
      "source_label": "greenhouse gas",
      "target_label": "greenhouse gas emissions",
      "relationship_type": "RELATED_TO",
      "formatted": "greenhouse gas -> greenhouse gas emissions (RELATED_TO)"
    },
    {
      "source_id": "Q218",
      "target_id": "Q1652",
      "source_label": "greenhouse gas",
      "target_label": "emissions reduction target",
      "relationship_type": "RELATED_TO",
      "formatted": "greenhouse gas -> emissions reduction target (RELATED_TO)"
    },
    {
      "source_id": "Q1209",
      "target_id": "Q1171",
      "source_label": "organisation and governance instrument",
      "target_label": "policy instruments",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "organisation and governance instrument -> policy instruments (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q1653",
      "target_id": "Q1652",
      "source_label": "net-zero target",
      "target_label": "emissions reduction target",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "net-zero target -> emissions reduction target (SUBCONCEPT_OF)"
    }
  ],
  "query": "Summarize Brazil\u2019s NDC climate-neutrality pathway: interim targets through 2040 and the key domestic policies cited as implementation evidence.",
  "extraction_method": "query_and_mcp_enhanced",
  "query_concepts_count": 1,
  "mcp_concepts_count": 0,
  "total_concepts_found": 1,
  "mcp_concepts": [],
  "links": [
    {
      "source": "Q1652",
      "target": "Q1651",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1652",
      "target": "Q1653",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1652",
      "target": "Q218",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1652",
      "target": "Q221",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1208",
      "target": "Q1171",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q221",
      "target": "Q218",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q221",
      "target": "Q1652",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1651",
      "target": "Q1171",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1651",
      "target": "Q1652",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1171",
      "target": "Q722",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1171",
      "target": "Q1207",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1171",
      "target": "Q1208",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1171",
      "target": "Q1209",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q1171",
      "target": "Q1651",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q722",
      "target": "Q1171",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1207",
      "target": "Q1171",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q218",
      "target": "Q221",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q218",
      "target": "Q1652",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1209",
      "target": "Q1171",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1653",
      "target": "Q1652",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    }
  ]
};
        
        // Drawing area
        const width = 1000;   // increased for breathing room
        const height = 1200;  // increased for breathing room
        
        const svg = d3.select("#kg-graph")
            .attr("width", "100%")
            .attr("height", "100%")
            .attr("viewBox", `0 0 ${width} ${height}`);
            
        const g = svg.append("g");
        
        // Data
        const nodes = kgData.nodes || [];
        const links = kgData.links || [];

        // Small initial jitter so nodes don't stack at same start pos
        nodes.forEach(n => {
            if (n.x == null || n.y == null) {
                n.x = (width / 2) + (Math.random() - 0.5) * 50;
                n.y = (height / 2) + (Math.random() - 0.5) * 50;
            }
        });

        // Color mapping
        const nodeColors = {
            'Concept': '#1f77b4',
            'Dataset': '#ff7f0e', 
            'Passage': '#2ca02c',
            'Document': '#d62728',
            'Unknown': '#7f7f7f'
        };

        // Reusable node radius (kept in sync with circle r)
        function nodeRadius(d) {
            return Math.max(5, Math.min(15, (d.importance || 1) * 8));
        }

        // Build degree map for smarter link distances
        const degree = {};
        links.forEach(l => {
            const sid = (typeof l.source === 'object') ? l.source.id : l.source;
            const tid = (typeof l.target === 'object') ? l.target.id : l.target;
            degree[sid] = (degree[sid] || 0) + 1;
            degree[tid] = (degree[tid] || 0) + 1;
        });

        // Create links
        const link = g.append("g")
            .selectAll("line")
            .data(links)
            .enter().append("line")
            .attr("class", "link");
        
        // Create nodes
        const node = g.append("g")
            .selectAll("circle")
            .data(nodes)
            .enter().append("circle")
            .attr("class", "node")
            .attr("r", d => nodeRadius(d))
            .attr("fill", d => nodeColors[d.type] || nodeColors['Unknown'])
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
        
        // Add labels (dy uses node radius to keep text just above the circle)
        const label = g.append("g")
            .selectAll("text")
            .data(nodes)
            .enter().append("text")
            .attr("class", "node-label")
            .attr("dy", d => -(nodeRadius(d) + 3))
            .text(d => d.label || d.id);

        // Zoom (we call svg.call(zoom) AFTER label exists so we can toggle it)
        const zoom = d3.zoom()
            .scaleExtent([0.3, 3])
            .on("zoom", (event) => {
                g.attr("transform", event.transform);
                const k = event.transform.k;
                // Hide labels when zoomed far out; show as we zoom in
                label.style("display", k < 0.6 ? "none" : null);
                // Optional: scale label font a bit with zoom for readability
                const baseFont = 10;
                label.attr("font-size", `${Math.max(8, Math.min(16, baseFont * Math.sqrt(k)))}px`);
            });
        
        // Physics simulation with collision + stronger repulsion + degree-aware link distance
        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links)
                .id(d => d.id)
                .distance(d => {
                    const sid = d.source.id || d.source, tid = d.target.id || d.target;
                    const sdeg = degree[sid] || 0, tdeg = degree[tid] || 0;
                    return 70 + 12 * Math.max(sdeg, tdeg);
                })
                .strength(0.7)
                )

            // Make charge depend on degree: isolates repel less, hubs repel more
            .force("charge", d3.forceManyBody().strength(d => (degree[d.id] || 0) === 0 ? -120 : -400))
            .force("collide", d3.forceCollide().radius(d => nodeRadius(d) + 6).iterations(2))
            .force("x", d3.forceX(width / 2).strength(0.03))   // gentle pull to center
            .force("y", d3.forceY(height / 2).strength(0.03))  // gentle pull to center
            .force("center", d3.forceCenter(width / 2, height / 2))
            .velocityDecay(0.35)
            .alpha(1)
            .alphaDecay(0.02);

        const isolateRadius = Math.min(width, height) * 0.38;
            simulation.force("isolateRadial", d3.forceRadial(
            isolateRadius,
            width / 2,
            height / 2
            ).strength(d => (degree[d.id] || 0) === 0 ? 0.08 : 0));


        // Tooltip
        //const tooltip = d3.select("#tooltip");
        
        //node.on("mouseover", function(event, d) {
        //   tooltip.transition().duration(200).style("opacity", .9);
        //  tooltip.html(`<strong>${d.label || d.id}</strong><br/>Type: ${d.type}<br/>Importance: ${d.importance || 'N/A'}`)
        //        .style("left", (event.pageX + 10) + "px")
        //        .style("top", (event.pageY - 28) + "px");
        //})
        //.on("mouseout", function() {
        //    tooltip.transition().duration(500).style("opacity", 0);
        //});
        
        // Update positions on simulation tick
        simulation.on("tick", () => {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);
            
            node
                .attr("cx", d => d.x)
                .attr("cy", d => d.y);
            
            label
                .attr("x", d => d.x)
                .attr("y", d => d.y)
                .attr("dy", d => -(nodeRadius(d) + 3)); // keep label above node as it moves
        });
        
        // Drag functions
        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }
        
        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }
        
        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        // Enable zoom after elements (esp. labels) exist
        svg.call(zoom);
    </script>
</body>
</html>