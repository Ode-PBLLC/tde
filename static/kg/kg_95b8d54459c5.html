<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Graph: Can you show a time series of total megawatt hours of Solar energy within Brazil?</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { margin: 0; padding: 10px; font-family: Arial, sans-serif; }
        .container { width: 100%; height: 1200px; border: 1px solid #ddd; position: relative; }
        .graph { width: 100%; height: 100%; }
        .tooltip { 
            position: absolute; 
            background: rgba(0,0,0,0.8); 
            color: white; 
            padding: 8px; 
            border-radius: 4px; 
            font-size: 12px; 
            pointer-events: none; 
            opacity: 0;
        }
        .query-title { 
            font-size: 14px; 
            font-weight: bold; 
            margin-bottom: 10px; 
            color: #333;
        }
        .node { cursor: pointer; }
        .link { stroke: #999; stroke-opacity: 0.6; stroke-width: 1.5px; }
        .node-label {
            font-size: 10px;
            fill: #333;
            text-anchor: middle;
            pointer-events: none;
            paint-order: stroke;
            stroke: white;
            stroke-width: 3px;
        }
    </style>
</head>
<body>
    <div class="query-title">Knowledge Graph: Can you show a time series of total megawatt hours of Solar energy within Brazil?</div>
    <div class="container">
        <svg class="graph" id="kg-graph"></svg>
        <div class="tooltip" id="tooltip"></div>
    </div>
    
    <script>
        // Embedded KG data
        const kgData = {
  "nodes": [
    {
      "id": "Q572",
      "kind": "Concept",
      "label": "bioenergy",
      "description": ""
    },
    {
      "id": "Q618",
      "kind": "Concept",
      "label": "solar energy",
      "description": "Solar energy is the radiation from the sun that can be converted into heat, electricity, or chemical reactions"
    },
    {
      "id": "Q868",
      "kind": "Concept",
      "label": "electricity supply sector",
      "description": "electric power generation, transmission and distribution activities"
    },
    {
      "id": "Q620",
      "kind": "Concept",
      "label": "Solar photovoltaic",
      "description": "Solar photovoltaic is a technology that uses sunlight to generate electricity"
    },
    {
      "id": "Q560",
      "kind": "Concept",
      "label": "mitigation",
      "description": "Reducing the emission of and quantity of greenhouse gases in the atmosphere. This involves cutting emissions from \"sources\" of greenhouse gases e.g. petrol cars and enhancing \"sinks\" which draw emissions down from the atmosphere e.g. forests."
    },
    {
      "id": "Q1024",
      "kind": "Concept",
      "label": "sustainable development goal 7",
      "description": "SDG7: affordable and clean energy"
    },
    {
      "id": "Q615",
      "kind": "Concept",
      "label": "marine energy",
      "description": "Marine energy, also known as marine and hydrokinetic energy, is a renewable energy source that comes from the natural movement of water."
    },
    {
      "id": "Q631",
      "kind": "Concept",
      "label": "Heat pumps",
      "description": ""
    },
    {
      "id": "Q601",
      "kind": "Concept",
      "label": "geothermal energy",
      "description": ""
    },
    {
      "id": "Q621",
      "kind": "Concept",
      "label": "Heliothermic",
      "description": "Heliothermic energy is a renewable energy source that uses mirrors to reflect sunlight and concentrate it into a receiver"
    },
    {
      "id": "Q254",
      "kind": "Concept",
      "label": "clean technology",
      "description": "Service, process, or product that enables the reduction of negative environmental impacts through significant energy efficiency improvements, the sustainable use of resources, or environmental protection activities"
    },
    {
      "id": "Q1323",
      "kind": "Concept",
      "label": "blue hydrogen",
      "description": "Blue hydrogen is produced mainly from natural gas. The definition of blue hydrogen includes the use of carbon capture and storage (CCS) to trap and store this carbon."
    },
    {
      "id": "Q1322",
      "kind": "Concept",
      "label": "green hydrogen",
      "description": "Green hydrogen is made by using clean electricity from surplus renewable energy sources, such as solar or wind power, to electrolyse water."
    },
    {
      "id": "Q1279",
      "kind": "Concept",
      "label": "feed-in-tariff",
      "description": "A policy instrument designed to support the development and acceleration of renewable energy sources by providing a guaranteed, above-market price for producers."
    },
    {
      "id": "Q253",
      "kind": "Concept",
      "label": "mitigation technologies",
      "description": ""
    },
    {
      "id": "Q567",
      "kind": "Concept",
      "label": "renewables",
      "description": "Renewables are a natural resource or source of energy that are not depleted by use, often with a low carbon footprint"
    },
    {
      "id": "Q622",
      "kind": "Concept",
      "label": "wind energy",
      "description": "Wind energy harnesses the kinetic energy of moving air by using large wind turbines located on land (onshore) or in sea- or freshwater (offshore)."
    },
    {
      "id": "Q606",
      "kind": "Concept",
      "label": "hydropower",
      "description": "Hydropower is the use of falling or fast-running water to produce electricity or to power machines."
    }
  ],
  "edges": [
    {
      "source": "Q572",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q618",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q618",
      "target": "Q620",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q618",
      "target": "Q621",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q868",
      "target": "Q567",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q620",
      "target": "Q618",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q560",
      "target": "Q253",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q560",
      "target": "Q254",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q560",
      "target": "Q567",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1024",
      "target": "Q567",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q615",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q631",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q631",
      "target": "Q253",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q601",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q621",
      "target": "Q618",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q254",
      "target": "Q253",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q254",
      "target": "Q560",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q254",
      "target": "Q567",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1323",
      "target": "Q1322",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1323",
      "target": "Q567",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1322",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1322",
      "target": "Q1323",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1279",
      "target": "Q567",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q253",
      "target": "Q560",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q253",
      "target": "Q254",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q253",
      "target": "Q567",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q253",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q572",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q601",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q606",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q615",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q618",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q622",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q631",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q1322",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q560",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q1323",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q254",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q1279",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q1024",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q868",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q622",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q606",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    }
  ],
  "query_concepts": [
    "Q618"
  ],
  "query_concept_labels": [
    "solar energy"
  ],
  "total_found": 18,
  "concepts": [
    {
      "id": "Q572",
      "label": "bioenergy"
    },
    {
      "id": "Q618",
      "label": "solar energy"
    },
    {
      "id": "Q868",
      "label": "electricity supply sector"
    },
    {
      "id": "Q620",
      "label": "Solar photovoltaic"
    },
    {
      "id": "Q560",
      "label": "mitigation"
    },
    {
      "id": "Q1024",
      "label": "sustainable development goal 7"
    },
    {
      "id": "Q615",
      "label": "marine energy"
    },
    {
      "id": "Q631",
      "label": "Heat pumps"
    },
    {
      "id": "Q601",
      "label": "geothermal energy"
    },
    {
      "id": "Q621",
      "label": "Heliothermic"
    },
    {
      "id": "Q254",
      "label": "clean technology"
    },
    {
      "id": "Q1323",
      "label": "blue hydrogen"
    },
    {
      "id": "Q1322",
      "label": "green hydrogen"
    },
    {
      "id": "Q1279",
      "label": "feed-in-tariff"
    },
    {
      "id": "Q253",
      "label": "mitigation technologies"
    },
    {
      "id": "Q567",
      "label": "renewables"
    },
    {
      "id": "Q622",
      "label": "wind energy"
    },
    {
      "id": "Q606",
      "label": "hydropower"
    }
  ],
  "relationships": [
    {
      "source_id": "Q572",
      "target_id": "Q567",
      "source_label": "bioenergy",
      "target_label": "renewables",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "bioenergy -> renewables (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q618",
      "target_id": "Q567",
      "source_label": "solar energy",
      "target_label": "renewables",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "solar energy -> renewables (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q618",
      "target_id": "Q620",
      "source_label": "solar energy",
      "target_label": "Solar photovoltaic",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "solar energy -> Solar photovoltaic (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q618",
      "target_id": "Q621",
      "source_label": "solar energy",
      "target_label": "Heliothermic",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "solar energy -> Heliothermic (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q868",
      "target_id": "Q567",
      "source_label": "electricity supply sector",
      "target_label": "renewables",
      "relationship_type": "RELATED_TO",
      "formatted": "electricity supply sector -> renewables (RELATED_TO)"
    },
    {
      "source_id": "Q620",
      "target_id": "Q618",
      "source_label": "Solar photovoltaic",
      "target_label": "solar energy",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "Solar photovoltaic -> solar energy (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q560",
      "target_id": "Q253",
      "source_label": "mitigation",
      "target_label": "mitigation technologies",
      "relationship_type": "RELATED_TO",
      "formatted": "mitigation -> mitigation technologies (RELATED_TO)"
    },
    {
      "source_id": "Q560",
      "target_id": "Q254",
      "source_label": "mitigation",
      "target_label": "clean technology",
      "relationship_type": "RELATED_TO",
      "formatted": "mitigation -> clean technology (RELATED_TO)"
    },
    {
      "source_id": "Q560",
      "target_id": "Q567",
      "source_label": "mitigation",
      "target_label": "renewables",
      "relationship_type": "RELATED_TO",
      "formatted": "mitigation -> renewables (RELATED_TO)"
    },
    {
      "source_id": "Q1024",
      "target_id": "Q567",
      "source_label": "sustainable development goal 7",
      "target_label": "renewables",
      "relationship_type": "RELATED_TO",
      "formatted": "sustainable development goal 7 -> renewables (RELATED_TO)"
    },
    {
      "source_id": "Q615",
      "target_id": "Q567",
      "source_label": "marine energy",
      "target_label": "renewables",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "marine energy -> renewables (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q631",
      "target_id": "Q567",
      "source_label": "Heat pumps",
      "target_label": "renewables",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "Heat pumps -> renewables (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q631",
      "target_id": "Q253",
      "source_label": "Heat pumps",
      "target_label": "mitigation technologies",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "Heat pumps -> mitigation technologies (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q601",
      "target_id": "Q567",
      "source_label": "geothermal energy",
      "target_label": "renewables",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "geothermal energy -> renewables (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q621",
      "target_id": "Q618",
      "source_label": "Heliothermic",
      "target_label": "solar energy",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "Heliothermic -> solar energy (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q254",
      "target_id": "Q253",
      "source_label": "clean technology",
      "target_label": "mitigation technologies",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "clean technology -> mitigation technologies (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q254",
      "target_id": "Q560",
      "source_label": "clean technology",
      "target_label": "mitigation",
      "relationship_type": "RELATED_TO",
      "formatted": "clean technology -> mitigation (RELATED_TO)"
    },
    {
      "source_id": "Q254",
      "target_id": "Q567",
      "source_label": "clean technology",
      "target_label": "renewables",
      "relationship_type": "RELATED_TO",
      "formatted": "clean technology -> renewables (RELATED_TO)"
    },
    {
      "source_id": "Q1323",
      "target_id": "Q1322",
      "source_label": "blue hydrogen",
      "target_label": "green hydrogen",
      "relationship_type": "RELATED_TO",
      "formatted": "blue hydrogen -> green hydrogen (RELATED_TO)"
    },
    {
      "source_id": "Q1323",
      "target_id": "Q567",
      "source_label": "blue hydrogen",
      "target_label": "renewables",
      "relationship_type": "RELATED_TO",
      "formatted": "blue hydrogen -> renewables (RELATED_TO)"
    },
    {
      "source_id": "Q1322",
      "target_id": "Q567",
      "source_label": "green hydrogen",
      "target_label": "renewables",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "green hydrogen -> renewables (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q1322",
      "target_id": "Q1323",
      "source_label": "green hydrogen",
      "target_label": "blue hydrogen",
      "relationship_type": "RELATED_TO",
      "formatted": "green hydrogen -> blue hydrogen (RELATED_TO)"
    },
    {
      "source_id": "Q1279",
      "target_id": "Q567",
      "source_label": "feed-in-tariff",
      "target_label": "renewables",
      "relationship_type": "RELATED_TO",
      "formatted": "feed-in-tariff -> renewables (RELATED_TO)"
    },
    {
      "source_id": "Q253",
      "target_id": "Q560",
      "source_label": "mitigation technologies",
      "target_label": "mitigation",
      "relationship_type": "RELATED_TO",
      "formatted": "mitigation technologies -> mitigation (RELATED_TO)"
    },
    {
      "source_id": "Q253",
      "target_id": "Q254",
      "source_label": "mitigation technologies",
      "target_label": "clean technology",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "mitigation technologies -> clean technology (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q253",
      "target_id": "Q567",
      "source_label": "mitigation technologies",
      "target_label": "renewables",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "mitigation technologies -> renewables (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q253",
      "source_label": "renewables",
      "target_label": "mitigation technologies",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "renewables -> mitigation technologies (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q572",
      "source_label": "renewables",
      "target_label": "bioenergy",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "renewables -> bioenergy (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q601",
      "source_label": "renewables",
      "target_label": "geothermal energy",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "renewables -> geothermal energy (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q606",
      "source_label": "renewables",
      "target_label": "hydropower",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "renewables -> hydropower (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q615",
      "source_label": "renewables",
      "target_label": "marine energy",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "renewables -> marine energy (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q618",
      "source_label": "renewables",
      "target_label": "solar energy",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "renewables -> solar energy (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q622",
      "source_label": "renewables",
      "target_label": "wind energy",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "renewables -> wind energy (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q631",
      "source_label": "renewables",
      "target_label": "Heat pumps",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "renewables -> Heat pumps (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q1322",
      "source_label": "renewables",
      "target_label": "green hydrogen",
      "relationship_type": "HAS_SUBCONCEPT",
      "formatted": "renewables -> green hydrogen (HAS_SUBCONCEPT)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q560",
      "source_label": "renewables",
      "target_label": "mitigation",
      "relationship_type": "RELATED_TO",
      "formatted": "renewables -> mitigation (RELATED_TO)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q1323",
      "source_label": "renewables",
      "target_label": "blue hydrogen",
      "relationship_type": "RELATED_TO",
      "formatted": "renewables -> blue hydrogen (RELATED_TO)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q254",
      "source_label": "renewables",
      "target_label": "clean technology",
      "relationship_type": "RELATED_TO",
      "formatted": "renewables -> clean technology (RELATED_TO)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q1279",
      "source_label": "renewables",
      "target_label": "feed-in-tariff",
      "relationship_type": "RELATED_TO",
      "formatted": "renewables -> feed-in-tariff (RELATED_TO)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q1024",
      "source_label": "renewables",
      "target_label": "sustainable development goal 7",
      "relationship_type": "RELATED_TO",
      "formatted": "renewables -> sustainable development goal 7 (RELATED_TO)"
    },
    {
      "source_id": "Q567",
      "target_id": "Q868",
      "source_label": "renewables",
      "target_label": "electricity supply sector",
      "relationship_type": "RELATED_TO",
      "formatted": "renewables -> electricity supply sector (RELATED_TO)"
    },
    {
      "source_id": "Q622",
      "target_id": "Q567",
      "source_label": "wind energy",
      "target_label": "renewables",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "wind energy -> renewables (SUBCONCEPT_OF)"
    },
    {
      "source_id": "Q606",
      "target_id": "Q567",
      "source_label": "hydropower",
      "target_label": "renewables",
      "relationship_type": "SUBCONCEPT_OF",
      "formatted": "hydropower -> renewables (SUBCONCEPT_OF)"
    }
  ],
  "query": "Can you show a time series of total megawatt hours of Solar energy within Brazil?",
  "extraction_method": "query_and_mcp_enhanced",
  "query_concepts_count": 1,
  "mcp_concepts_count": 0,
  "total_concepts_found": 1,
  "mcp_concepts": [],
  "links": [
    {
      "source": "Q572",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q618",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q618",
      "target": "Q620",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q618",
      "target": "Q621",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q868",
      "target": "Q567",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q620",
      "target": "Q618",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q560",
      "target": "Q253",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q560",
      "target": "Q254",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q560",
      "target": "Q567",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1024",
      "target": "Q567",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q615",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q631",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q631",
      "target": "Q253",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q601",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q621",
      "target": "Q618",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q254",
      "target": "Q253",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q254",
      "target": "Q560",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q254",
      "target": "Q567",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1323",
      "target": "Q1322",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1323",
      "target": "Q567",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1322",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q1322",
      "target": "Q1323",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q1279",
      "target": "Q567",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q253",
      "target": "Q560",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q253",
      "target": "Q254",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q253",
      "target": "Q567",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q253",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q572",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q601",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q606",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q615",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q618",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q622",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q631",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q1322",
      "type": "HAS_SUBCONCEPT",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q560",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q1323",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q254",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q1279",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q1024",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q567",
      "target": "Q868",
      "type": "RELATED_TO",
      "weight": 1.0
    },
    {
      "source": "Q622",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    },
    {
      "source": "Q606",
      "target": "Q567",
      "type": "SUBCONCEPT_OF",
      "weight": 1.0
    }
  ]
};
        
        // Drawing area
        const width = 1000;   // increased for breathing room
        const height = 1200;  // increased for breathing room
        
        const svg = d3.select("#kg-graph")
            .attr("width", "100%")
            .attr("height", "100%")
            .attr("viewBox", `0 0 ${width} ${height}`);
            
        const g = svg.append("g");
        
        // Data
        const nodes = kgData.nodes || [];
        const links = kgData.links || [];

        // Small initial jitter so nodes don't stack at same start pos
        nodes.forEach(n => {
            if (n.x == null || n.y == null) {
                n.x = (width / 2) + (Math.random() - 0.5) * 50;
                n.y = (height / 2) + (Math.random() - 0.5) * 50;
            }
        });

        // Color mapping
        const nodeColors = {
            'Concept': '#1f77b4',
            'Dataset': '#ff7f0e', 
            'Passage': '#2ca02c',
            'Document': '#d62728',
            'Unknown': '#7f7f7f'
        };

        // Reusable node radius (kept in sync with circle r)
        function nodeRadius(d) {
            return Math.max(5, Math.min(15, (d.importance || 1) * 8));
        }

        // Build degree map for smarter link distances
        const degree = {};
        links.forEach(l => {
            const sid = (typeof l.source === 'object') ? l.source.id : l.source;
            const tid = (typeof l.target === 'object') ? l.target.id : l.target;
            degree[sid] = (degree[sid] || 0) + 1;
            degree[tid] = (degree[tid] || 0) + 1;
        });

        // Create links
        const link = g.append("g")
            .selectAll("line")
            .data(links)
            .enter().append("line")
            .attr("class", "link");
        
        // Create nodes
        const node = g.append("g")
            .selectAll("circle")
            .data(nodes)
            .enter().append("circle")
            .attr("class", "node")
            .attr("r", d => nodeRadius(d))
            .attr("fill", d => nodeColors[d.type] || nodeColors['Unknown'])
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));
        
        // Add labels (dy uses node radius to keep text just above the circle)
        const label = g.append("g")
            .selectAll("text")
            .data(nodes)
            .enter().append("text")
            .attr("class", "node-label")
            .attr("dy", d => -(nodeRadius(d) + 3))
            .text(d => d.label || d.id);

        // Zoom (we call svg.call(zoom) AFTER label exists so we can toggle it)
        const zoom = d3.zoom()
            .scaleExtent([0.3, 3])
            .on("zoom", (event) => {
                g.attr("transform", event.transform);
                const k = event.transform.k;
                // Hide labels when zoomed far out; show as we zoom in
                label.style("display", k < 0.6 ? "none" : null);
                // Optional: scale label font a bit with zoom for readability
                const baseFont = 10;
                label.attr("font-size", `${Math.max(8, Math.min(16, baseFont * Math.sqrt(k)))}px`);
            });
        
        // Physics simulation with collision + stronger repulsion + degree-aware link distance
        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links)
                .id(d => d.id)
                .distance(d => {
                    const sid = d.source.id || d.source, tid = d.target.id || d.target;
                    const sdeg = degree[sid] || 0, tdeg = degree[tid] || 0;
                    return 70 + 12 * Math.max(sdeg, tdeg);
                })
                .strength(0.7)
                )

            // Make charge depend on degree: isolates repel less, hubs repel more
            .force("charge", d3.forceManyBody().strength(d => (degree[d.id] || 0) === 0 ? -120 : -400))
            .force("collide", d3.forceCollide().radius(d => nodeRadius(d) + 6).iterations(2))
            .force("x", d3.forceX(width / 2).strength(0.03))   // gentle pull to center
            .force("y", d3.forceY(height / 2).strength(0.03))  // gentle pull to center
            .force("center", d3.forceCenter(width / 2, height / 2))
            .velocityDecay(0.35)
            .alpha(1)
            .alphaDecay(0.02);

        const isolateRadius = Math.min(width, height) * 0.38;
            simulation.force("isolateRadial", d3.forceRadial(
            isolateRadius,
            width / 2,
            height / 2
            ).strength(d => (degree[d.id] || 0) === 0 ? 0.08 : 0));


        // Tooltip
        //const tooltip = d3.select("#tooltip");
        
        //node.on("mouseover", function(event, d) {
        //   tooltip.transition().duration(200).style("opacity", .9);
        //  tooltip.html(`<strong>${d.label || d.id}</strong><br/>Type: ${d.type}<br/>Importance: ${d.importance || 'N/A'}`)
        //        .style("left", (event.pageX + 10) + "px")
        //        .style("top", (event.pageY - 28) + "px");
        //})
        //.on("mouseout", function() {
        //    tooltip.transition().duration(500).style("opacity", 0);
        //});
        
        // Update positions on simulation tick
        simulation.on("tick", () => {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);
            
            node
                .attr("cx", d => d.x)
                .attr("cy", d => d.y);
            
            label
                .attr("x", d => d.x)
                .attr("y", d => d.y)
                .attr("dy", d => -(nodeRadius(d) + 3)); // keep label above node as it moves
        });
        
        // Drag functions
        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }
        
        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }
        
        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        // Enable zoom after elements (esp. labels) exist
        svg.call(zoom);
    </script>
</body>
</html>